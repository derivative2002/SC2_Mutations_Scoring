# 突变难度评估技术方案（更新版）

本方案在原有的深度学习模型框架上，进一步结合单刷与双打的评分标准，对“星际2合作模式”中的突变任务从多角度进行难度判定。以下更新方案将结合已有的难度等级划分标准以及此前所述的建模思路，使模型在小数据量场景下有更高的解释性与可操作性。

---

## 目录

1. [前言 (Introduction)](#前言-introduction)  
2. [评分标准与需求调整 (Scoring Standard & Refined Requirements)](#评分标准与需求调整-scoring-standard--refined-requirements)  
3. [数据概述 (Data Overview)](#数据概述-data-overview)  
4. [关键挑战 (Key Challenges)](#关键挑战-key-challenges)  
5. [整体建模思路 (Modeling Plan)](#整体建模思路-modeling-plan)  
   1. [数据标注策略 (Data Labeling Strategy)](#数据标注策略-data-labeling-strategy)  
   2. [特征设计 (Feature Engineering)](#特征设计-feature-engineering)  
   3. [评估流程与要点 (Evaluation Flow & Key Criteria)](#评估流程与要点-evaluation-flow--key-criteria)  
6. [模型训练与验证 (Training and Validation)](#模型训练与验证-training-and-validation)  
7. [迭代与扩展 (Iteration and Extension)](#迭代与扩展-iteration-and-extension)  
8. [结论与后续工作 (Conclusion and Future Work)](#结论与后续工作-conclusion-and-future-work)

---

## 前言 (Introduction)

“星际2合作模式”的突变任务包含地图、突变因子、指挥官（单刷或双打）的多维度信息，组合后的难度千差万别。本文档在原先的深度学习方案基础上，结合了单刷与双打的评分标准来进行进一步的技术规划，为评估突变难度提供更具指导性的方法。

目标：  
• 构建或优化一套难度评估模型，在输入“地图、指挥官、突变因子”基础信息后，综合评分标准中的指标，输出可靠的难度等级。

---

## 评分标准与需求调整 (Scoring Standard & Refined Requirements)

### 1. 单刷评分标准

| 难度等级 | 分数 | 指挥官要求                   | 资源管理                         | 突变因子影响                         | 容错空间                   |
| -------- | ---- | ---------------------------- | -------------------------------- | ------------------------------------ | -------------------------- |
| 简单     | 1    | 基础操作即可，适合新手指挥官 | 基础资源管理，不需要特别规划     | 突变因子影响较小，容易应对           | 失误影响小，有充足恢复空间 |
| 普通     | 2    | 需要了解指挥官核心机制和特点 | 需要基本的资源规划和使用         | 突变组合带来一定挑战，但压力可控     | 允许多次失误，有恢复机会   |
| 困难     | 3    | 需要熟练掌握指挥官特性和技巧 | 需要合理规划资源和兵种配置       | 突变组合带来明显压力，需要针对性应对 | 重大失误可能导致任务失败   |
| 专家     | 4    | 需要深入理解指挥官极限和细节 | 需要精确的资源控制和关键时间点   | 突变组合具有较强威胁，需要专门战术   | 小失误可能导致任务失败     |
| 残酷     | 5    | 需要完美运营和极限操作       | 资源管理必须高度优化，几乎零浪费 | 突变组合极具威胁，需要完美应对       | 几乎不允许失误             |

### 2. 双打评分标准

| 难度等级 | 分数 | 指挥官要求                 | 资源管理                                       | 突变因子影响                     | 容错空间                       |
| -------- | ---- | -------------------------- | ---------------------------------------------- | -------------------------------- | ------------------------------ |
| 简单     | 1    | 基础配合即可，适合新手组合 | 各自独立发展即可，不需要特别规划               | 突变因子影响较小，双方易于应对   | 互相可以弥补失误，容错空间大   |
| 普通     | 2    | 需要基本的指挥官协同配合   | 需要基本的经济节奏规划，了解各自发展时机       | 突变组合有一定影响，需要简单配合 | 一方失误可由另一方补充         |
| 困难     | 3    | 需要良好的指挥官配合默契   | 需要合理规划双方发展优先级，把握关键发展时间点 | 突变组合需要双方配合应对         | 重大失误难以弥补，但有缓冲空间 |
| 专家     | 4    | 需要默契的指挥官配合和补充 | 需要精确的经济规划，合理分配前后期发展重点     | 突变组合威胁需要高度协同处理     | 关键失误容易导致任务失败       |
| 残酷     | 5    | 需要完美的指挥官协同和配合 | 需要完美的经济节奏，准确把握双方发展时机和重点 | 突变组合极难应对，需要完美配合   | 任何一方的失误都可能导致失败   |

### 3. 综合评估要点

1. 判断单刷或双打任务  
2. 评估突变因子威胁程度及组合效应（是否有强力 COMBO）  
3. 考虑指挥官（或指挥官组合）对特定突变的应对能力  
4. 评估资源管理/经济发展要求  
5. 结合容错空间综合得出最终难度分数或等级  

**需求调整**：模型需要输出的结果不只是个数值，还需能按照此评分标准将结果归入不同难度等级；或在评分区间（如1~5，或更细分1~10）内呈现，帮助玩家理解为什么某突变被评为此级别。

---

## 数据概述 (Data Overview)

数据源主要来自玩家在突变挑战中的反馈，涵盖打分（如1-10或1-5）以及对比标注（A比B更难等）。数据存量仅约250条，覆盖地图、指挥官、突变因子等信息。

- 需要在预处理阶段对这些数据做规范化：  
  1. 将突变因子拆分为可学习或可枚举的 ID；  
  2. 识别单刷/双打信息；  
  3. 对已有的打分或标签进行归一化，方便后续与评分标准直接对照。

---

## 关键挑战 (Key Challenges)

1. 主观噪声加大，可能与“单刷/双打”评分标准不完全一致。  
2. 小数据量（250条）难以支撑深层网络学习突变因子的复杂交互。  
3. 容错空间与资源管理等隐含信息，有赖于指挥官、地图的深度关联，需要更精细或显式的特征设计。  

---

## 整体建模思路 (Modeling Plan)

本方案整体流程：  
1. 根据输入（地图 / 指挥官 / 突变因子 / 单刷 or 双打），抽取相应特征。  
2. 引入评分标准中的领域知识对特征进行修正或加权。  
3. 使用轻量化的深度学习模型（或多任务学习结构），输出难度值。  
4. 将难度值映射到对应等级（如 1-5 五档，或拓展到更细的分档）进行解释。

### 数据标注策略 (Data Labeling Strategy)

• 绝对打分 vs. 对比标注 vs. 混合  
• 建议在小数据场景下，对于评价分歧较大的突变使用对比投票增补。  

### 特征设计 (Feature Engineering)

1. 地图 & 指挥官：  
   - 以 embedding 或手工分类（如“资源型地图”）结合“指挥官风格（爆发型/稳健型）”。  
2. 突变因子：  
   - 重点识别与资源管理/容错空间相关的因子（如经济削弱类、环境干扰类、敌人强化类），便于映射评分标准。  
3. 单/双刷模式：  
   - 通过二值特征标记，或在输入层以独立 embedding 方式区分。  
4. 附加领域规则：  
   - 强力 combo：对部分组合设置 combo_flag 或直接在模型输出层做规则修正。  
   - 评分标准辅助：对于已知“残酷级别”突变，可事先做难度附加值指定。

### 评估流程与要点 (Evaluation Flow & Key Criteria)

1. 单/双打分支：  
   - 在模型输出前，根据输入（单刷/双打）调用对应的评分标准，并将模型预测值进行校正或分档。  
2. 突变威胁度：  
   - 由突变因子 embedding 综合得到的“威胁向量”，衡量组合效应是否达到高威胁度（≥专家级等）。  
3. 指挥官适应度：  
   - 根据指挥官能力（或组合能力）衡量容错空间的高低，对于资源管理难度大的地图/突变，可相应增加难度预估。  

---

## 模型训练与验证 (Training and Validation)

1. 训练流程简化：  
   1) 将现有 250 条数据分为训练/验证集（或采用交叉验证）。  
   2) 预处理突变因子、地图、指挥官等特征，并将单/双打信息作为额外输入。  
   3) 训练目标为回归（输出1-5或1-10），或pairwise对比；再映射到五档评分。  
   4) 根据评分标准做后处理：如若预测值为 4.3，可定性为“专家级(4)”。  
2. 验证指标：  
   - MAE 或 MSE：预测值与玩家标注值差异；  
   - 分级准确率：参考五档标准，看预测结果落入的难度区间正确率；  
   - Pairwise 准确率：若有对比数据(Ranking Loss)。  

---

## 迭代与扩展 (Iteration and Extension)

1. 数据增补与特征细化  
   - 收集更多玩家反馈或 Replay 数据，有针对性地讨论资源管理/容错空间细节。  
2. 迁移学习或预训练  
   - 若能搜集其他地图或相似任务大样本数据，进行预训练 embedding 再微调。  
3. 规则融合与修正  
   - 加入专家知识对部分极难或极易情况进行二次修正，保证评估模型在关键突变上的表现。  
4. 高阶模型  
   - 当数据量充足后可尝试 Transformer / GNN，对突变因子交互进行更灵活的建模。

---

## 结论与后续工作 (Conclusion and Future Work)

在已有的单/双打评分标准基础上，针对小规模数据（约250条）的突变组合预测需求，建议使用轻量级网络或多任务模型进行评分预测，并借助适度的人工规则来弥补数据不足。模型输出与评分标准相结合，更直观地帮助玩家或研发人员理解每道突变在资源管理、突变因子影响、指挥官要求、容错空间等层面的难度。

后续如能持续积累更多数据并完善特征工程，亦可逐渐引入更复杂的网络结构，对“强力 combo”进行深度捕捉，从而实现更精确、可解释性更好的突变难度评估体系。
